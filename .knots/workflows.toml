# Knots workflow definitions.
# There is no built-in runtime fallback: every knot must use a workflow id defined here.

[[workflows]]
id = "default"
description = "Canonical delivery workflow"
initial_state = "idea"
states = [
  "idea",
  "work_item",
  "implementing",
  "implemented",
  "reviewing",
  "rejected",
  "refining",
  "approved",
  "shipped",
  "deferred",
  "abandoned"
]
terminal_states = ["shipped", "deferred", "abandoned"]

[[workflows.transitions]]
from = "idea"
to = "work_item"

[[workflows.transitions]]
from = "work_item"
to = "implementing"

[[workflows.transitions]]
from = "implementing"
to = "implemented"

[[workflows.transitions]]
from = "implemented"
to = "reviewing"

[[workflows.transitions]]
from = "reviewing"
to = "approved"

[[workflows.transitions]]
from = "reviewing"
to = "rejected"

[[workflows.transitions]]
from = "rejected"
to = "refining"

[[workflows.transitions]]
from = "refining"
to = "implemented"

[[workflows.transitions]]
from = "approved"
to = "shipped"

[[workflows.transitions]]
from = "*"
to = "deferred"

[[workflows.transitions]]
from = "*"
to = "abandoned"

[[workflows]]
id = "triage"
description = "Short triage loop"
initial_state = "todo"
states = ["todo", "doing", "done"]
terminal_states = ["done"]

[[workflows.transitions]]
from = "todo"
to = "doing"

[[workflows.transitions]]
from = "doing"
to = "done"

[[workflows]]
id = "simple"
description = "Traditional linear delivery workflow"
initial_state = "work_item"
states = [
  "work_item",
  "implementing",
  "queued_for_review",
  "reviewing",
  "reviewed",
  "shipping",
  "shipped",
]
terminal_states = ["shipped"]

[[workflows.transitions]]
from = "work_item"
to = "implementing"

[[workflows.transitions]]
from = "implementing"
to = "queued_for_review"

[[workflows.transitions]]
from = "queued_for_review"
to = "reviewing"

[[workflows.transitions]]
from = "reviewing"
to = "reviewed"

[[workflows.transitions]]
from = "reviewed"
to = "shipping"

[[workflows.transitions]]
from = "shipping"
to = "shipped"
